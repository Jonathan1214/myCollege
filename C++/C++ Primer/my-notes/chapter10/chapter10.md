# 第十章 泛型算法

[返回总目录](../../README.md)

+ [10.1 概述](#10.1-概述)
+ [10.2 初识泛型算法](#10.2-初识泛型算法)
+ [10.3 定制操作](#10.3-定制操作)
+ [10.4 再探迭代器](#10.4-再探迭代器)
+ [10.5 泛型算法结构](#10.5-泛型算法结构)
+ [10.6 特定容器算法](#10.6-特定容器算法)

## 10.1 概述

大多数算法都定义在头文件 algorithm 中。标准库还在头文件 numeric 中定义了一组数值泛型算法。

### 算法如何工作

### 迭代器令算法不依赖于容器

### 但算法依赖于元素类型的操作

算法用于不会执行容器的操作。即不会增加或删除元素。

## 10.2 初识泛型算法

标准库提供了超过 100 个算法，不需要死记，理解其中的结构即可。

除少数例外，标准库算法都对一个范围内的元素进行操作。称为『输入范围』。

### 10.2.1 只读算法

只读取，不改变。如 `find`、`count`、`accumulate`。

#### 算法和元素类型

#### 操作两个序列的算法

`equal`，判断两个序列是否相等。

### 10.2.2 写容器元素的算法

算法不改变容器的大小。

#### 算法不检查写错误

#### 介绍 back_insertor

使用 插入迭代器 保证有足够元素空间来容纳输出数据。

#### 拷贝算法

`copy`，向目的位置迭代器指向的输出序列中的元素写入数据。

### 10.2.3 重排容器元素的算法

如 `sort` 函数，使用升序排列。

#### 消除重复单词

先使用 `sort` ，再使用 `unique`。

#### 使用 unique

对元素重排，容器前面一部分元素无重复，unique 指向最后一个不重复元素的下一个元素的位置。

#### 使用容器操作删除元素

## 10.3 定制操作

很多算法都会比较输入序列的元素，我们可以定制这种比较操作。

### 10.3.1 向算法传递函数

如 `sort` 接受三个参数。

#### 谓词

谓词是一个可调用的表达式，其返回结果是一个能作条件的值。一元谓词接受一个参数，二元谓词接受两个参数。

#### 排序算法

`stable_sort` 稳定排序。

### 10.3.2 lambda 表达式

#### 介绍 lambda

可以向一个算法传递任何类别的 **可调用对象**。

一个对象或一个表达式，如果可以对其使用调用运算符，则称它为可调用对象。

可调用对象：函数，函数指针，重载了函数调用运算符的类，以及 **lambda 表达式**。

lambda 表达式形式：`[capture list](parameter list) -> return type { function body }`。其中，capture list 是一个 lambda 所在函数中定义的局部变量的列表，通常为空。

lambda 函数必须使用 **尾置返回** 来指定返回类型。

#### 向 lambda 传递参数

lambda 不能有默认参数，一个 lambda 调用的实参数目永远与形参数目相等。

#### 使用捕获列表

一个 lambda 只有在其捕获列表中捕获一个它所在函数中的局部变量 ，才能在函数体中使用该变量。

#### 调用 find_if

#### for_each 算法

此算法接受一个可调用对象，并向输入序列中的每个元素调用此对象。

### 10.3.3 lambda 捕获和返回

当定义一个 lambda 时，编译器生成一个与 lambda 对应的新的（未命名的）类类型。

#### 值捕获

类似参数传递，变量的捕获方式也可以是值或引用。

#### 引用捕获

定义 lambda 时可以采用引用方式捕获变量。

**建议**：尽量保持 lambda 的变量捕获简单化。

#### 隐式捕获

lambda 捕获列表：
| 格式 | 说明 |
| :---- | :---- |
| [] | 空捕获 |
| [names] | 显示捕获，可以是引用捕获或值捕获 |
| [&] | 隐式引用捕获 |
| [=] | 隐式值捕获 |
| [&, *identifier_list*] | 隐式引用捕获和显式值捕获混合 |
|[=, *identifier_list*] | 隐式值捕获和显式引用捕获混合 |

#### 指定 lambda 的返回类型

使用 **尾置返回**。

### 10.3.4 参数绑定

#### 标准库 bind 函数

#### 绑定 check_size 的 sz 函数

#### 使用 placeholders 名字

#### bind 的参数

#### 用 bind 重排参数顺序

#### 绑定引用参数

## 10.4 再探迭代器

除为容器定义的迭代器之外，头文件 iterator 中还定义了：

+ 插入迭代器
+ 流迭代器
+ 反向迭代器
+ 移动迭代器

### 10.4.1 插入迭代器

+ back_inserter
+ front_inserter
+ inserter

### 10.4.2 iostream 迭代器

## 10.5 泛型算法结构

## 10.6 特定容器算法
